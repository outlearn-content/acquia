<!--
{
"name" : "drupal-8-fields-entities",
"version" : "0.0.1",
"title" : "Lesson 5.1 - Fields for entities",
"description" : "Fields for entities",
"freshnessDate" : 2015-12-11,
"homepage" : "https://docs.acquia.com/articles/drupal-8-fields-entities",
"canonicalSource" : "https://docs.acquia.com/articles/drupal-8-fields-entities",
"license" : "CC BY-SA"
}
-->

## Create an initial export of the configuration

Before we can manage configuration through the website's user interface, we need to export the configuration stored — by default — in the database, to the file system. This will allow us to easily update this stored configuration and move the configuration between environments.

After you confirm that you have updated your installed version of Drush to the most recent version, run the following Drush command:

```
drush config-export
```

For additional information about using Drush, see [Drush based workflow](https://www.drupal.org/node/2416591) on drupal.org.

<!-- @task, "text" : "Make sure you have understood the Drush based configuration workflow." -->

<!-- @task, "text" : "Export the configuration of your Drupal 8 site to the file system." -->

<!-- @section -->

## Create a new content type

In the previous lesson, we discussed ways to create a new content type. You'll need to create one here.

1.  Enable the [Link](https://www.drupal.org/project/link) module.
2.  Create a new content type called `External`, save it, and then edit its fields.
3.  Add a new Link field named `URL`, set number of values to `1`, and then save the change.
4.  Re-use an existing image field, name it `Screenshot`, and then save the change.

When you navigate to `/node/add`, your website now displays the new External content type in action!

![external-node.png](https://raw.githubusercontent.com/outlearn-content/acquia/master/assets/external-node.png)

<!-- @task, "text" : "Create the External content type with a Link field." -->

<!-- @section -->

## What is the Configuration Manager?

The [Configuration manager](https://www.drupal.org/documentation/administer/config) module provides a user interface for importing and exporting configuration changes such as for staging configuration data between multiple instances of this website.

### View the configuration changes

Navigate to the Configuration Manager section at `/admin/config/development/configuration`. Upon navigating to that URI you will see the following message:

```
Your current configuration has changed. Changes to these configuration items will be lost on the next synchronization:
* core.entity_form_display.node.external.default
* core.entity_view_display.node.external.default
* core.entity_view_display.node.external.teaser
* core.extension
* field.field.node.external.body
* field.field.node.external.field_image
* field.field.node.external.field_url
* field.storage.node.field_url
* node.type.external
* user.role.administrator
```

Copy this list of file names for your new field to a safe place. You will use the list later in [Lesson 5.2 - Exporting configurations](https://www.outlearn.com/module/pronovix/drupal-8-exporting-configurations).

You may see additional files listed here, particularly if you are re-using an existing Drupal 8 install. It is safe to ignore them. In addition, these listed files can be discarded as they are not needed. They are created during the initial Drupal 8 install:

*   `core.extension`
*   `user.role.administrator`

<!-- @task, "text" : "See the changes you have made to the configuration of your site by adding a new content type." -->

### What are these configuration files?

Configuration files are configuration settings that, by default, reside in the database and which can be exported as configuration files. We will export these settings for use in our module.

First, let's look at what each file does by comparing the file to the corresponding UI form:

*   **`node.type.external`**

    Settings generated by the content type `edit` form.

    _URL path:_ `/admin/structure/types/manage/external`

*   **`core.entity_form_display.node.external.default`**

    Settings that define how field form widgets are displayed when a content type is in edit mode.

    _URL path:_ `/admin/structure/types/manage/external/form-display`

*   **`core.entity_view_display.node.external.default`**

    Settings that define how fields are displayed for the default view mode.

    _URL path:_ `/admin/structure/types/manage/external/display`

*   **`core.entity_view_display.node.external.teaser`**

    Settings that define how fields are displayed for the `teaser` view mode. While there are default settings for the `teaser` view mode, they are hidden away in the `Custom Display Settings` fieldset.

*   **`field.field.node.external.body`**

    Settings that define the body field. While there are default settings for the body field, there is no UI other than the main content edit node. This is a recent configuration change.

*   **`field.field.node.external.field_image`**

    Definee the existing instance of `field_image` for the screenshot field.

    _URL path:_ `/admin/structure/types/manage/external/fields/node.external.field_image`

*   **`field.field.node.external.field_url`**

    Defines the instance of `field_url` for the url field.

    _URL path:_ `/admin/structure/types/manage/external/fields/node.external.field_url`

*   **`field.storage.node.field_url`**

    Defines the storage settings of the `field_url` field. These settings impact the table settings for the field in the database and apply to all uses of `field_url`.

    _URL path:_ `/admin/structure/types/manage/external/fields/node.external.field_url/storage`

#### What is the difference between field.field and field.storage files?

The Field API defines two primary data structures, FieldStorage and Field, and the concept of a Bundle. A FieldStorage defines a particular type of data that can be attached to entities. A Field is attached to a single Bundle. A Bundle is a set of fields that are treated as a group by the Field Attach API and is related to a single fieldable entity type. Want to know more about bundles, fields, and entity types? Read [An Introduction to Entities](https://www.drupal.org/node/1261744) on drupal.org.

<!-- @task, "text" : "Have a sense of the meaning of those exported configuration files by running through at least the changed ones." -->

<!-- @task, "text" : "Increase your knowledge about configuration files by changing some setting in the UI, reexporting the configuration and checking the change. Do it again some five to ten times." -->
